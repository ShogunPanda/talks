---
layout: cover
# ---

---
layout: separator
title: |
  Fight your fears!
image:
  url: '@common/skydiving.png'
options:
  background: fuchsia
# ---

---
layout: hello
# ---

---
layout: half
title: First of all, let's give credits!
content:
  - This talk has originally been written by my colleague and friend **Michele Riva**.
  - <span class="theme@fg-pink">**Whatever goes wrong today, please complain directly to him on Twitter!**</span>
  - <strong class="theme@fg-blue">[@MicheleRivaCode](https://twitter.com/@MicheleRivaCode)</strong>
image:
  url: '@common/michele.png'
decorations:
  logo: white
# ---

---
layout: separator
title: Compiling and bundling JavaScript is often a pain ...
image:
  url: '@common/complicated.png'
options:
  background: blue
# ---

---
layout: separator
title: …but it<br/> should not!
image:
  url: '@common/easy.png'
className:
  root: theme@separator--reverse
options:
  background: red
decorations:
  logo: black
# ---

---
layout: quote
title: 'A bit of terminology: Compiling'
quote:
  sentence: |
    To change a computer program
    into a machine language
  author: Cambridge Dictionary
  light: true
  icons: false
decorations:
  number: 1
  className:
    number: talk@terminology
# ---

---
layout: quote
title: 'A bit of terminology: Transpiling'
quote:
  sentence: |
    To translate a source code into
    a different language source code
  author: Michele Riva
  light: true
  icons: false
decorations:
  number: 2
  className:
    number: talk@terminology
# ---

---
layout: quote
title: 'A bit of terminology: Bundling'
quote:
  sentence: |
    To pack all code and resources in
    a single source file or executable
  author: Me, a.k.a. Paolo Insogna
  light: true
  icons: false
decorations:
  number: 3
  className:
    number: talk@terminology
# ---

---
layout: separator
title: Transpilation
options:
  background: sky
# ---

---
title: Why do we want to transpile our code?
content:
  - We all have a loved language we'd like to see everywhere.
items:
  entries:
    - icon: rocket
      title: Adopt new language features
      text: |
        Runtimes update slower than the languages.
        *We don't want to wait.*
    - icon: circle-nodes
      title: Write once, run everywhere™
      text: We want to write our scripts in our language despite of the runtime environment.
  horizontal: true
notes: |
  Spiega il processo del TC39:

  0. Informal
  1. Formal
  2. Draft, first implementations
  3. Candidate, 2 implementations
  4. Finished

# ---
---
title: Who are you missing the most?
content:
  - We all have a loved language we'd like to see everywhere.
items:
  entries:
    - image: '@common/scala.png'
      title: Scala.js
      text: Scala to Javascript
    - image: '@common/opal.png'
      title: Opal
      text: Ruby to Javascript
  horizontal: true
# ---

---
title: 'An example: transpilation of Scala.js'
image:
  url: '@talk/scala-js-transpile.png'
# ---

---
title: Where do we (mostly) run?
content:
  - There are few known runtimes and browsers, way less than in the past.
grids:
  - entries:
      - image: '@common/chrome.png'
      - image: '@common/firefox.png'
      - image: '@common/safari.png'
      - image: '@common/edge.png'
  - className: talk@icons-grid
    entries:
      - image: '@talk/node.png'
      - image: '@common/deno.png'
      - image: '@common/bun.png'
notes: |
  Firefox usa SpiderMonkey, le feature vengono implementate più velocemente.

  La tail-call funge solo su JSC - Menziona che gli env possono essere molto diversi.

# ---
---
title: There is a transpiler for everything…™
grids:
  - className: talk@icons-grid
    entries:
      - image: '@common/f-sharp.png'
        title: F#
      - image: '@common/kotlin.png'
        title: Kotlin
      - image: '@common/gleam.png'
        title: Gleam
      - image: '@common/reasonml.png'
        title: ReasonML
      - image: '@common/elm.png'
        title: ELM
      - image: '@common/rescript.png'
        title: ReScript
notes: |
  * F# -> .NET
  * Kotlin -> Java
  * Gleam -> Sintassi Rust per Erlang
  * OCAML -> ReasonML e ReScript
  * ELM -> Haskell

# ---
---
title: … and that's thanks to LLVM!
content:
  - The project is a collection of modular and reusable compiler and toolchains.
image:
  url: '@common/llvm.png'
notes: |
  LLVM permette già di compilare in JavaScript.

# ---
---
title: What are you missing the most?
content:
  - We all want to adopt new language features even before they are finalised.
items:
  entries:
    - image: '@talk/babel-pipe-from.png'
      className:
        root: talk@transform__root
        image: talk@transform__image
    - image: '@talk/babel-transform.png'
      className:
        root: talk@transform__root
        image: talk@transform__arrow
    - image: '@talk/babel-pipe-to.png'
      className:
        root: talk@transform__root
        image: talk@transform__image
  className: talk@transform
  horizontal: true
  spacer: false
  gap: false
notes: |
  Pipe da Hack - Dialetto PHP di Facebook

# ---
---
title: There is no end to what we can achieve
content:
  - We can even transpile features that likely will never get into the language.
items:
  entries:
    - image: '@talk/babel-ts-from.png'
      className:
        root: talk@transform__root
        image: talk@transform__image
    - image: '@talk/babel-transform.png'
      className:
        root: talk@transform__root
        image: talk@transform__arrow
    - image: '@talk/babel-ts-to.png'
      className:
        root: talk@transform__root
        image: talk@transform__image
  className: talk@transform
  horizontal: true
  spacer: false
  gap: false
# ---

---
layout: separator
title: |
  Transpiling,
  in depth
subtitle: Let's have a deep look on how a transpiler really works.
image:
  url: '@common/server.png'
options:
  background: sky
# ---

---
title: Generated code is not always readable…
items:
  entries:
    - image: '@talk/clojurescript-from.png'
      className:
        root: talk@generation--vertical__root
        image: talk@generation--vertical__image
    - image: '@common/arrow-down.png'
      className:
        root: talk@generation--vertical__root
        image: talk@generation--vertical__arrow
    - image: '@talk/clojurescript-to.png'
      className:
        root: talk@generation--vertical__root
        image: talk@generation--vertical__image
  className: talk@generation--vertical
  spacer: false
  gap: false
# ---

---
title: …but some transpilers are really good!
items:
  entries:
    - image: '@talk/reasonml-from.png'
      className:
        root: talk@generation--horizontal__root
        image: talk@generation--horizontal__image
    - image: '@common/arrow-right.png'
      className:
        root: talk@generation--horizontal__root
        image: talk@generation--horizontal__arrow
    - image: '@talk/reasonml-to.png'
      className:
        root: talk@generation--horizontal__root
        image: talk@generation--horizontal__image
  className: talk@generation--horizontal
  horizontal: true
  spacer: false
  gap: false
# ---

---
title: Each language has its own transpiler
grids:
  - gap: gap-y-4ch
    entries:
      - image: '@common/javascript.png'
        title: Babel
      - image: '@common/typescript.png'
        title: TSC
      - image: '@common/reasonml.png'
        title: BuckleScript
      - image: '@talk/clojurescript.png'
        title: ClojureScript
# ---

---
layout: separator
title: No transpiler is perfect!
image:
  url: '@common/incomplete.png'
options:
  background: blue
decorations:
  logo: black
# ---

---
title: 'Problem #1: Transpilation time'
grids:
  - gap: gap-y-4ch
    entries:
      - image: '@common/javascript.png'
        title: Slow on large codebases
      - image: '@common/typescript.png'
        title: Slow on large codebases
      - image: '@common/reasonml.png'
        title: Really fast
      - image: '@talk/clojurescript.png'
        title: Average
decorations:
  number: 1
  className:
    number: talk@problem-number
# ---

---
title: 'Problem #2: Output optimization'
grids:
  - gap: gap-y-4ch
    entries:
      - image: '@common/javascript.png'
        title: Well optimized
      - image: '@common/typescript.png'
        title: Quite optimized
      - image: '@common/rescript.png'
        title: Beautifully optimized
      - image: '@talk/clojurescript.png'
        title: Awful
options:
  horizontal: true
decorations:
  number: 2
  className:
    number: talk@problem-number
# ---

---
title: Let's focus on the popular one!
content:
  - No intention to discriminate any language.
items:
  entries:
    - image: '@common/javascript.png'
      title: Babel
      text: Quite fast, well optimized
    - image: '@common/typescript.png'
      title: TSC
      text: Quite slow, quite optimized
  horizontal: true
# ---

---
title: How does a transpiler work?
content:
  - Transpiling time grows proportionally to the source code.
items:
  entries:
    - index: 1
      title: Parsing
      text: The source code is parsed and converted to an Abstract Syntax Tree (AST)
    - index: 2
      title: Transformation
      text: The source language AST is traversed and mapped to the destination language AST.
    - index: 3
      title: Code generation (codegen)
      text: The destination language AST is converted to the destination source code.
# ---

---
title: 'Parsing step #1: Tokenization'
content:
  - The input is divided into tokens.
items:
  entries:
    - image: '@talk/parsing-1-1.png'
      title: Input
      className:
        image: talk@parsing__image
    - image: '@talk/parsing-1-2.png'
      title: Output
      className:
        image: talk@parsing__image
  horizontal: true
decorations:
  number: 1
  className:
    number: talk@parsing__step
# ---

---
title: 'Parsing step #2: Syntactical Analysis'
content:
  - The tokens are parsed and analysed.
items:
  entries:
    - image: '@talk/parsing-2-1.png'
      title: Input
      text: (user code)
      className:
        image: talk@parsing__image
    - image: '@talk/parsing-2-2.png'
      title: Parse Tree
      text: (a.k.a. Concrete Syntax Tree)
      className:
        image: talk@parsing__image
  horizontal: true
decorations:
  number: 2
  className:
    number: talk@parsing__step
# ---

---
title: 'Parsing step #3: Prepare the AST'
content:
  - The Parse Tree is converted into the Abstract syntax tree.
image:
  url: '@talk/ast.png'
decorations:
  number: 3
  className:
    number: talk@parsing__step
# ---

---
title: 'Parsing step #4: Build the AST'
content:
  - The Abstract Syntax Tree is built and returned to the developer.
image:
  url: '@talk/ast-js.png'
decorations:
  number: 4
  className:
    number: talk@parsing__step
# ---

---
title: Traversing the AST
content:
  - The transpiler exposes an API to allow developer to manipulate the AST.
image:
  url: '@talk/traversing-1.png'
# ---

---
title: Transforming the AST
content:
  - The traversing API allows to manipulate the AST.
image:
  url: '@talk/traversing-2.png'
# ---

---
title: Code generation
content:
  - The modified AST is used to generate the final transpiled code.
items:
  entries:
    - image: '@talk/codegen-input.png'
      title: Input
      className:
        image: talk@parsing__image
    - image: '@talk/codegen-output.png'
      title: Output
      className:
        image: talk@parsing__image
  horizontal: true
# ---

---
title: All your popular tools use this flow
items:
  entries:
    - image: '@common/babel.png'
      title: Babel
      className:
        image: theme-misc@width-auto
    - image: '@common/prettier.png'
      title: Prettier
    - image: '@common/eslint.png'
      title: ESLint
  horizontal: true
# ---

---
title: 'A more complex example: the problem'
content:
  - |
    **jscodeshift** can be used to easily migrate codebases.
items:
  entries:
    - image: '@talk/jscodeshift-from.png'
      title: Input
      className:
        image: talk@problem__image
    - image: '@talk/jscodeshift-to.png'
      title: Desired output
      className:
        image: talk@problem__image
  horizontal: true
# ---

---
title: 'A more complex example: the solution'
image:
  url: '@talk/jscodeshift-solution.png'
# ---

---
layout: separator
title: Bundling
options:
  background: sky
# ---

---
title: Why do we want to bundle our code?
content:
  - Bundling improves the developer experience. And it also benefits users.
items:
  entries:
    - icon: rocket
      title: To create a single executable file
      text: A single file, especially if statically linked, is much easier to distribute and to install.
    - icon: circle-nodes
      title: To serve a single JavaScript file
      text: Serving only a single file reduces the overhead and improves the user experience.
  horizontal: true
notes: |
  Menziona di non fare il bundle lato server.

# ---
---
title: The three horsemen
content:
  - These are the mostly used bundlers, each with pros and cons.
items:
  entries:
    - image: '@common/webpack.png'
      title: Webpack
      text: Hardest<br/>_Slower_
    - image: '@common/rollup.png'
      title: Rollup
      text: Easy<br/>_Slow_
    - image: '@common/parcel.png'
      title: Parcel
      text: Easiest<br/>_Fast_
  horizontal: true
# ---

---
layout: separator
title: Is webpack still worth it?
image:
  url: '@common/webpack.png'
  className: talk@logo
options:
  background: amber
decorations:
  logo: black
# ---

---
title: Are there any better alternatives?
grids:
  - gap: gap-y-4ch
    entries:
      - image: '@common/esbuild.png'
        title: ESBuild
      - image: '@common/swc.png'
        title: SWC
        className:
          image: theme-misc@width-auto
      - image: '@common/vite.png'
        title: Vite
      - image: '@common/snowpack.png'
        title: SnowPack
# ---

---
layout: separator
title: ESBuild
image:
  url: '@common/esbuild.png'
  className: talk@logo
options:
  background: sky
# ---

---
title: How fast ESBuild is?
content:
  - A lot, especially when comparing with webpack.
image:
  url: '@talk/esbuild-performances.png'
# ---

---
title: Ok, it's fast. What about configuration?
content:
  - ESBuild CLI is definitely easy to use.
image:
  url: '@talk/esbuild-cli.png'
# ---

---
layout: separator
title: SWC
image:
  url: '@common/swc.png'
  className: talk@logo--auto
options:
  background: sky
# ---

---
title: How does it compare to ESBuild?
content:
  - SWC is sometimes faster than ESBuild.
items:
  entries:
    - image: '@talk/esbuild-vs-swc-es2019.png'
      title: ES2019
      className:
        image: talk@parsing__image
    - image: '@talk/esbuild-vs-swc-es2020.png'
      title: ES2020
      className:
        image: talk@parsing__image
  horizontal: true
# ---

---
title: An example of SWC configuration
image:
  url: '@talk/swc-config.png'
# ---

---
layout: separator
title: SWC can run in a browser thanks to WASM
image:
  url: '@common/matrioska.png'
options:
  background: green
# ---

---
layout: separator
title: Vite
image:
  url: '@common/vite.png'
  className: talk@logo
options:
  background: sky
# ---

---
title: A little insights into Vite
items:
  entries:
    - icon: code
      title: Complete developer experience
      text: It provides a webserver with Hot Module Reload support.
    - icon: circle-nodes
      title: A bundler that doesn't actually bundle
      text: It completely leverages ECMAScript Modules.
    - icon: rocket
      title: Still very fast
      text: We will talk about this is in a bit.
notes: |
  Spiega la differenza tra CJS e ESM.

# ---
---
title: Vite leverages existing tools
content:
  - ESBuild and Rollup are used under the hood.
items:
  entries:
    - image: '@common/esbuild.png'
      className:
        root: talk@vite__esbuild__root
        image: talk@vite__esbuild__image
    - image: '@common/vite.png'
      className:
        root: talk@vite__vite__root
        image: talk@vite__vite__image
    - image: '@common/rollup.png'
      className:
        root: talk@vite__rollup__root
        image: talk@vite__rollup__image
  className: talk@vite
  horizontal: true
  spacer: false
  gap: false
# ---

---
layout: separator
title: Snowpack
image:
  url: '@common/snowpack.png'
  className: talk@logo--auto
options:
  background: sky
# ---

---
title: And now something completely different™
content:
  - |
    **Skypack** used snowpack to load module in the browsers without a bundler.
image:
  url: '@common/skypack.png'
# ---

---
layout: side
title: The greatest gain<br/>in new bundlers
content:
  - New bundlers give <code>O(1)</code> compile time which is great when the number of modules grows.
image:
  url: '@talk/compile.png'
# ---

---
title: Take home lessons
content:
  - What can we learn from this long journey?
items:
  entries:
    - icon: code
      title: The future is no bundle
      text: As ECMAScript module support increases, bundlers will not be needed anymore.
    - icon: sack-dollar
      title: The future is bright
      text: Big companies are sponsoring transpilers and bundlers and this ensures continuity.
    - icon: rocket
      title: Competition is good
      text: Having multiple transpilers and bundlers competing to be the winner gives the best DX.
  horizontal: true
# ---

---
layout: quote
quote:
  sentence: |
    Working hard and working smart
    can be two different things.
  author: Byron Dorgan
# ---

---
layout: end
# ---
